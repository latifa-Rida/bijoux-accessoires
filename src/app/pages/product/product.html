<div class="max-w-7xl mx-auto px-4 md:px-6 py-8 md:py-12">
  <!-- Titre -->
  <div class="text-center mb-10 md:mb-12">
    <div class="flex items-center justify-center gap-4 mb-4">
      <div class="h-1 w-12 bg-[#C1664C] rounded-full"></div>
      <h1 class="text-3xl md:text-4xl lg:text-5xl font-black text-[#3D312B] tracking-tight uppercase">
        Nos Produits
      </h1>
      <div class="h-1 w-12 bg-[#C1664C] rounded-full"></div>
    </div>
    <p class="text-[#3D312B]/70 text-sm md:text-base font-medium">
      Découvrez notre collection exclusive
    </p>
  </div>

  <!-- Filtres Modernes -->
  <div class="flex flex-wrap gap-3 md:gap-4 mb-8 md:mb-10 items-center justify-center">
    <!-- Tous -->
    <button (click)="filterByCategory('all')" [ngClass]="{
        'bg-[#C1664C] text-white shadow-lg scale-105': selectedCategory === 'all',
        'bg-white text-[#3D312B] border border-[#D5BDAF]/30 hover:border-[#C1664C]/50': selectedCategory !== 'all',
      }"
      class="group flex items-center gap-2 px-5 py-3 rounded-2xl font-semibold text-sm transition-all duration-300 hover:scale-105 shadow-sm hover:shadow-md">
      <span class="material-symbols-outlined text-lg"
        style="font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;">
        apps
      </span>
      <span>Tous</span>
    </button>

    <!-- Bijoux -->
    <button (click)="filterByCategory('bijoux')" [ngClass]="{
        'bg-[#C1664C] text-white shadow-lg scale-105': selectedCategory === 'bijoux',
        'bg-white text-[#3D312B] border border-[#D5BDAF]/30 hover:border-[#C1664C]/50': selectedCategory !== 'bijoux',
      }"
      class="group flex items-center gap-2 px-5 py-3 rounded-2xl font-semibold text-sm transition-all duration-300 hover:scale-105 shadow-sm hover:shadow-md">
      <span class="material-symbols-outlined text-lg"
        style="font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;">
        diamond
      </span>
      <span>Bijoux</span>
    </button>

    <!-- Montres -->
    <button (click)="filterByCategory('montres')" [ngClass]="{
        'bg-[#C1664C] text-white shadow-lg scale-105': selectedCategory === 'montres',
        'bg-white text-[#3D312B] border border-[#D5BDAF]/30 hover:border-[#C1664C]/50': selectedCategory !== 'montres',
      }"
      class="group flex items-center gap-2 px-5 py-3 rounded-2xl font-semibold text-sm transition-all duration-300 hover:scale-105 shadow-sm hover:shadow-md">
      <span class="material-symbols-outlined text-lg"
        style="font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;">
        schedule
      </span>
      <span>Montres</span>
    </button>

    <!-- Sacs -->
    <button (click)="filterByCategory('sacs')" [ngClass]="{
        'bg-[#C1664C] text-white shadow-lg scale-105': selectedCategory === 'sacs',
        'bg-white text-[#3D312B] border border-[#D5BDAF]/30 hover:border-[#C1664C]/50': selectedCategory !== 'sacs',
      }"
      class="group flex items-center gap-2 px-5 py-3 rounded-2xl font-semibold text-sm transition-all duration-300 hover:scale-105 shadow-sm hover:shadow-md">
      <span class="material-symbols-outlined text-lg"
        style="font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;">
        shopping_bag
      </span>
      <span>Sacs</span>
    </button>

    <!-- Maquillages -->
    <button (click)="filterByCategory('maquillages')" [ngClass]="{
        'bg-[#C1664C] text-white shadow-lg scale-105': selectedCategory === 'maquillages',
        'bg-white text-[#3D312B] border border-[#D5BDAF]/30 hover:border-[#C1664C]/50': selectedCategory !== 'maquillages',
      }"
      class="group flex items-center gap-2 px-5 py-3 rounded-2xl font-semibold text-sm transition-all duration-300 hover:scale-105 shadow-sm hover:shadow-md">
      <span class="material-symbols-outlined text-lg"
        style="font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;">
        palette
      </span>
      <span>Maquillage</span>
    </button>
  </div>

  <!-- Search Display -->
  <div *ngIf="searchQuery" class="mb-6 text-center">
    <div class="inline-flex items-center gap-3 px-4 py-2 bg-[#C1664C]/10 rounded-full">
      <span class="text-sm text-[#3D312B]/70">Résultats pour :</span>
      <span class="font-semibold text-[#C1664C]">« {{ searchQuery }} »</span>
      <button (click)="clearSearch()" class="ml-2 p-1 hover:bg-[#C1664C]/20 rounded-full transition-colors">
        <span class="material-symbols-outlined text-sm text-[#3D312B]/60"
          style="font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;">
          close
        </span>
      </button>
    </div>
  </div>

  <!-- Résultats -->
  <div class="mb-6 text-center">
    <p class="text-[#3D312B]/60 text-sm font-medium">
      <span class="font-bold text-[#C1664C]">{{ filteredProducts.length }}</span>
      produit{{ filteredProducts.length > 1 ? 's' : '' }} trouvé{{ filteredProducts.length > 1 ? 's' : '' }}
    </p>
  </div>

  <!-- Grid produits -->
  <div *ngIf="filteredProducts.length > 0; else noProducts"
    class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 md:gap-8">
    <div *ngFor="let product of filteredProducts"
      class="flex flex-col bg-white rounded-3xl shadow-[0_10px_25px_-5px_rgba(193,102,76,0.1),0_8px_10px_-6px_rgba(193,102,76,0.1)] overflow-hidden border border-[#D5BDAF]/10 hover:border-[#C1664C]/30 transition-all duration-300 hover:shadow-xl hover:-translate-y-1">
      <div class="h-72 overflow-hidden relative group">
        <img [src]="product.image" [alt]="product.name"
          class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700" />
      </div>
      <div class="p-2 md:p-6 flex flex-col flex-grow">
        <h3 class="text-[#3D312B] font-bold text-lg mb-1">
          {{ product.name }}
        </h3>
        <p class="text-[#C1664C] font-black text-xl">{{ product.price }} DH</p>
        <div class="flex gap-2 mt-auto">
          <button (click)="goToDetails(product.id)"
            class="flex-1 bg-[#D5BDAF]/20 hover:bg-[#D5BDAF]/40 text-[#3D312B] text-xs font-bold py-3 px-3 rounded-[1.25rem] transition-colors">
            Voir détails
          </button>
          <button routerLink="/cart"
            class="bg-transparent hover:bg-amber-600 border-amber-600 border-1 text-amber-600 py-3 px-4 rounded-[1.25rem] shadow-amber-100 hover:text-white transition-colors flex items-center justify-center">
            <span class="material-symbols-outlined text-xl"
              style="font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;">
              shopping_cart
            </span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Aucun produit -->
  <ng-template #noProducts>
    <div class="flex flex-col items-center justify-center py-16 md:py-24 text-center">
      <span class="material-symbols-outlined text-6xl md:text-7xl text-[#D5BDAF] mb-4"
        style="font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;">
        search_off
      </span>
      <h3 class="text-xl md:text-2xl font-bold text-[#3D312B] mb-2">
        {{ searchQuery ? 'Aucun produit trouvé' : 'Aucun produit trouvé' }}
      </h3>
      <p class="text-[#3D312B]/60 text-sm md:text-base max-w-md">
        {{ searchQuery ? 'Aucun produit ne correspond à votre recherche "' + searchQuery + '". Essayez un autre terme.'
        : 'Aucun produit ne correspond à cette catégorie. Essayez une autre catégorie.' }}
      </p>
      <button (click)="searchQuery ? clearSearch() : filterByCategory('all')"
        class="mt-6 px-6 py-3 bg-[#C1664C] text-white rounded-2xl font-semibold hover:bg-[#C1664C]/90 transition-all hover:scale-105">
        {{ searchQuery ? 'Effacer la recherche' : 'Voir tous les produits' }}
      </button>
    </div>
  </ng-template>
</div>
